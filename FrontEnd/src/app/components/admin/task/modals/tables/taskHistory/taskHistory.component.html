<div class="px-6 py-4 flex justify-between" *ngIf="showActiveTasks">
  <div class="flex justify-center mb-1">
    <button
      mat-flat-button
      color="primary"
      (click)="toggleShowActiveTasks(); emitShowActiveTasksChange()"
    >
      {{ showActiveTasks ? "Mostrar Tareas Activas" : "Mostrar Histórico" }}
    </button>
  </div>
  <div class="font-bold text-xl mb-2">Histórico de tareas</div>
  <mat-radio-group
    [value]="searchRadioButtonValue"
    (change)="onRadioButtonChange($event)"
  >
    <mat-radio-button value="Priority">Prioridad</mat-radio-button>
    <mat-radio-button value="Status">Estado</mat-radio-button>
    <mat-radio-button value="User">Usuario</mat-radio-button>
    <mat-radio-button value="Room">Habitación</mat-radio-button>
    <mat-radio-button value="Observations">Observaciones</mat-radio-button>
  </mat-radio-group>
  <input type="text" (keyup)="taskFilter($event)" placeholder="Buscar..." />
</div>
<div>
  <mat-table
    [dataSource]="dataSource"
    matSort
    (matSortChange)="orderColumns($event)"
    class="table w-full"
    style="border-collapse: collapse"
  >
    <!-- Priority Column -->
    <ng-container matColumnDef="Priority" class="hover:bg-gray-700">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Prioridad</th>
      <td mat-cell *matCellDef="let element">{{ element.priority }}</td>
    </ng-container>

    <!-- Status Column -->
    <ng-container matColumnDef="Status">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Estado</th>
      <td mat-cell *matCellDef="let element">{{ element.status }}</td>
    </ng-container>

    <!-- User Column -->
    <ng-container matColumnDef="User">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Usuario</th>
      <td mat-cell *matCellDef="let element">
        {{ element.user.name }} {{ element.user.surname }}
      </td>
    </ng-container>

    <!-- Room Column -->
    <ng-container matColumnDef="Room" class="max-md:invisible col-telf">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Habitación</th>
      <td mat-cell *matCellDef="let element">
        Nº {{ element.room.roomNumber }}
        <span *ngIf="element.room.floor"
          >- Planta {{ element.room.floor }}</span
        >
      </td>
    </ng-container>

    <!-- createdDate Column -->
    <ng-container matColumnDef="Observations">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Fecha</th>
      <td mat-cell *matCellDef="let element">
        {{ element.createdDate }}
      </td>
    </ng-container>

    <!-- Options Column -->
    <ng-container matColumnDef="actions">
      <th mat-header-cell *matHeaderCellDef>Acciones</th>
      <td mat-cell *matCellDef="let element">
        <button
          title="Eliminar"
          mat-icon-button
          color="warn"
          (click)="deleteTask(element.id, element)"
        >
          <mat-icon>delete</mat-icon>
        </button>
      </td>
    </ng-container>
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </mat-table>

  <!-- Paginacion -->
  <mat-paginator
    (page)="eventPager($event)"
    #paginacion
    [pageSize]="paginationRequest.pageSize"
    [pageSizeOptions]="comboPages"
    [length]="totalTasks"
  ></mat-paginator>
</div>
