<form
  [formGroup]="taskForm"
  (ngSubmit)="updateTask()"
  class="modal-content bg-[#eff6e0] p-10"
>
  <h1 class="mat-dialog-title w-full text-center">Modificar tarea</h1>
  <div class="grid grid-cols-2 gap-4">
    <!-- User table component -->
    <app-task-user-table
      [selectedIdUser]="userId"
      (selectedIdUserChange)="onSelectedIdUserChange($event)"
      class="col-span-2"
    ></app-task-user-table>
    <!-- Save the user id selected, hidden -->
    <input
      hidden
      formControlName="user"
      matInput
      name="user"
      type="text"
      [value]="userId"
      class="dark:text-white"
    />
    <!-- Room table component -->
    <app-task-room-table
      [data]="data.roomNumbers"
      [selectedIdRoom]="roomId"
      (selectedIdRoomChange)="onSelectedIdRoomChange($event)"
      class="col-span-2"
    ></app-task-room-table>
    <!-- Save the room id selected, hidden -->
    <input
      hidden
      formControlName="room"
      matInput
      name="room"
      type="text"
      [value]="roomId"
    />

    <mat-radio-group formControlName="priority" name="priority">
      <mat-label>Prioridad</mat-label>
      <mat-radio-button value="Baja">Baja</mat-radio-button>
      <mat-radio-button value="Normal">Normal</mat-radio-button>
      <mat-radio-button value="Alta">Alta</mat-radio-button>
    </mat-radio-group>

    <mat-form-field appearance="fill" class="col-span-2">
      <mat-label>Observaciones</mat-label>
      <textarea
        formControlName="observations"
        matInput
        name="observations"
        matTextareaAutosize
        matAutosizeMinRows="3"
        matAutosizeMaxRows="5"
      ></textarea>
    </mat-form-field>
    <mat-label>Estado: {{ data.task.status }}</mat-label>

    <mat-dialog-actions class="col-span-2 flex justify-between">
      <button
        (click)="updateStatus('Finalizada')"
        mat-raised-button
        mat-dialog-close
        class="green"
        *ngIf="data.task.status === 'Pendiente'"
      >
        Marcar como finalizada
      </button>
      <button
        (click)="updateStatus('Pendiente')"
        mat-raised-button
        mat-dialog-close
        class="orange"
        *ngIf="data.task.status === 'Finalizada'"
      >
        Marcar como pendiente
      </button>

      <button mat-button mat-dialog-close>Cerrar</button>
      <button
        [disabled]="taskForm.invalid"
        type="submit"
        mat-raised-button
        [mat-dialog-close]="true"
        class="edit-button green"
      >
        Modificar tarea
      </button>
    </mat-dialog-actions>
  </div>
</form>
