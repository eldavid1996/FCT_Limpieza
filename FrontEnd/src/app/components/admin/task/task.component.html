<section class="p-5 mt-10">
  <div
    class="sm:w-full lg:w-4/5 mx-auto rounded overflow-hidden shadow-lg py-3 beige"
  >
    <div class="px-6 py-4 flex justify-between">
      <div class="font-bold text-xl mb-2">Tareas activas</div>
      <mat-radio-group
        [value]="searchRadioButtonValue"
        (change)="onRadioButtonChange($event)"
      >
        <mat-radio-button value="Priority">Prioridad</mat-radio-button>
        <mat-radio-button value="Status">Estado</mat-radio-button>
        <mat-radio-button value="User">Usuario</mat-radio-button>
        <mat-radio-button value="Room">Habitación</mat-radio-button>
        <mat-radio-button value="Observations">Observaciones</mat-radio-button>
      </mat-radio-group>
      <input type="text" (keyup)="taskFilter($event)" placeholder="Buscar..." />
    </div>
    <div>
      <mat-table
        [dataSource]="dataSource"
        matSort
        (matSortChange)="orderColumns($event)"
        class="table w-full"
        style="border-collapse: collapse"
      >
        <!-- Priority Column -->
        <ng-container matColumnDef="Priority" class="hover:bg-gray-700">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Prioridad</th>
          <td mat-cell *matCellDef="let element">{{ element.priority }}</td>
        </ng-container>

        <!-- Status Column -->
        <ng-container matColumnDef="Status">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Estado</th>
          <td mat-cell *matCellDef="let element">{{ element.status }}</td>
        </ng-container>

        <!-- User Column -->
        <ng-container matColumnDef="User">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Usuario</th>
          <td mat-cell *matCellDef="let element">
            {{ element.user.name }} {{ element.user.surname }}
          </td>
        </ng-container>

        <!-- Room Column -->
        <ng-container matColumnDef="Room" class="max-md:invisible col-telf">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Habitación</th>
          <td mat-cell *matCellDef="let element">
            Nº {{ element.room.roomNumber }}
            <span *ngIf="element.room.floor"
              >- Planta {{ element.room.floor }}</span
            >
          </td>
        </ng-container>

        <!-- createdDate Column -->
        <ng-container matColumnDef="Observations">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Observaciones</th>
          <td mat-cell *matCellDef="let element">
            {{ element.observations}}
          </td>
        </ng-container>

        <!-- Options Column -->
        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef>Acciones</th>
          <td mat-cell *matCellDef="let element">
            <button
              title="Editar"
              mat-icon-button
              color="primary"
              (click)="updateTask(element)"
            >
              <mat-icon>edit</mat-icon>
            </button>
            <button
              title="Eliminar"
              mat-icon-button
              color="warn"
              (click)="deleteTask(element.id, element)"
            >
              <mat-icon>delete</mat-icon>
            </button>
          </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
      </mat-table>

      <!-- Paginacion -->
      <mat-paginator
        (page)="eventPager($event)"
        #paginacion
        [pageSize]="paginationRequest.pageSize"
        [pageSizeOptions]="comboPages"
        [length]="totalTasks"
      ></mat-paginator>
    </div>
    <div class="px-6 pt-4 pb-2 grid">
      <div class="place-self-end">
        <button class="boton-nuevo" mat-flat-button (click)="insertTask()">
          Añadir tarea<mat-icon>person</mat-icon>
        </button>
      </div>
    </div>
  </div>
</section>
